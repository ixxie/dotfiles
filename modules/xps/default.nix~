{ config, pkgs, ... }:

{

  imports =
  [
    ./hardware-config.nix
    ./efiboot.nix
  ];
  
  hardware =
  {
    enableAllFirmware = true;
    cpu.intel.updateMicrocode = true;
  };

  services.xserver =
  {
    # Make right click
    desktopManager.gnome3.extraGSettingsOverrides =
    ''
      [org.gnome.desktop.peripherals.touchpad]
      click-method = 'default'
    '';
  };

  boot =
  {
    blacklistedKernelModules =
    [
      "psmouse" # for psmouse error
      "mei_wdt" # for udev wait for device
    ];
  };

}
